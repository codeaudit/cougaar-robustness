require 'cougaar/communities'
require 'ultralog/enclaves'

society.each_enclave do |enclave|
  society.each_enclave_node(enclave) do |node|
    if node.has_facet?(:role)
      node.each_facet("role") do |facet|
        role = facet["role"]
        if role == "Management"
          society.communities.each do |community|
	    if community.name == "1AD-#{enclave}-COMM"
              community.each do |entity|
	        if entity.name == node.name && entity.entity_type == "Node"
	          entity.add_attribute("UseForRestarts", "False")
	          break
	        end
	      end
	      break
	    end
          end
	end
      end
    end # end "if node.has_facet?(:Management)"
  end # end "society.each_enclave_node(enclave) do |node|"
end # end "society.each_enclave do |enclave|"
