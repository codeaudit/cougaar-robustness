<project name="Disconnection" default="create_cougaar_overlay" basedir=".">

<property name="src" value="src"/>
<property name="build" value="compiled"/>
<property name="jar" value="Disconnection.jar"/>
<property environment="env"/>
<property name="cougaar" value="${env.COUGAAR_INSTALL_PATH}"/>
    
	<path id="cougaar.libs">
		<pathelement location="/var/www/html/jars/Robustness_objs_common_HEAD_B10_4_1BETA.jar"/>
		<pathelement location="/var/www/html/jars/Robustness_objs_Deconfliction_HEAD_B10_4_1BETA.jar"/>
		<fileset dir="${cougaar}/lib">
			<include name="**/*.jar"/>
		</fileset>
		<fileset dir="${cougaar}/sys">
			<include name="**/*.jar"/>
		</fileset>
        </path>

	<target name="delete">
          <delete dir="${build}"/>
          <mkdir dir="${build}"/>
        </target>

      <target name="compile">
        <javac  deprecation="true" 
                debug="true" 
                optimize="false" 
                srcdir="${src}" 
                destdir="${build}">
                <classpath refid="cougaar.libs"/>
        </javac>
     </target>

	<target name="jar" > <!--depends="compile"-->
		<jar jarfile="${jar}" baseDir="${build}"/>
	</target>

	<target name="create_cougaar_overlay">
		<mkdir dir="staging/lib"/>
		<mkdir dir="staging/sys"/>
		<antcall target="delete"/>
		<antcall target="compile"/>
		<antcall target="jar"/>
		<signjar jar="${jar}" keystore="/home/build/signingCA_keystore" alias="privileged" storepass="keystore"/>
   	<move file="${jar}" todir="staging/lib"/>
    <copy todir="staging/csmart">
      <fileset dir="csmart/"/>
    </copy>
    <zip zipfile="AR_objs_disconnection.zip" basedir="staging"/>
	</target>

	<target name="clean" depends="delete,compile,jar"/>
    
	<target name="jarNMove">
		<antcall target="jar"/>
		<signjar jar="${jar}" keystore="signingCA.keystore" alias="privileged" storepass="keystore"/>
 		<move file="${jar}" todir="${cougaar}/lib"/>
   </target>
        
</project>



